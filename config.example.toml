# Email categorise / triage configuration
# Copy to config.toml and edit.

[auth]
# auth_mode:
# - "application": daemon / cron friendly (no browser login). Uses client credentials and Graph .default scope.
# - "delegated": interactive login on first use, then cached tokens (requires a browser).
auth_mode = "application"

# Token cache (shared by MSAL). Stored under ./data by default.
token_cache_path = "./data/msal_token_cache.bin"

[azure]
# Public/Confidential app ID (Entra ID App registration -> Application (client) ID)
client_id = "YOUR_CLIENT_ID"

# Default tenant. For single-tenant setups, set this to your tenant GUID.
# For multi-tenant delegated use, "organizations" can work, but for application auth you generally
# want the real tenant ID per org.
tenant_id = "YOUR_TENANT_ID_OR_organizations"

# For application auth, set client secret via env var (do NOT commit secrets).
# The tool reads the secret from this env var name:
client_secret_env = "MS_GRAPH_CLIENT_SECRET"

# Delegated scopes (ONLY used if auth_mode="delegated")
# IMPORTANT: do NOT include openid/profile/offline_access here; MSAL treats them as reserved and will error.
delegated_scopes = [
  "Mail.ReadWrite",
  "Mail.Send"
]

[triage]
lookback_days_initial = 60
lookback_days_incremental = 3
max_messages_per_run = 40

# Tone profiling: Sent Items lookback for building tone profiles
tone_profile_lookback_days = 120

# Features
draft_replies = false
create_tasks = false
send_summary_email = false
log_to_file = true

# Optional summary email settings (requires Mail.Send)
summary_email_to = "lewis@colemanbros.co.uk"
# Which account should send summaries (must be in [[accounts]])
summary_email_from_account = "lewis@colemanbros.co.uk"

[llm]
# LLM provider for triage + tone profiling + drafting.
#
# provider:
# - "codex": use Codex CLI (recommended). No API key needed if Codex is authenticated already.
# - "codex-oss": use Codex CLI with --oss (routes to local provider, requires Ollama).
provider = "codex"

# Recommended defaults:
# - Fast & good: gpt-4.1-mini
# - Stronger replies: gpt-4.1 or gpt-5.1-chat-latest
#
# The model list you pasted includes many options.
# For this project, prefer chat/reasoning models (gpt-4.1*, gpt-5.* chat).
# Avoid codex models for email tone, unless you are doing code tasks.
triage_model = "gpt-4.1-mini"
reply_model = "gpt-4.1"

# Faster/cheaper triage (less accurate):
# triage_model = "gpt-4.1-nano"
# reply_model  = "gpt-4.1-mini"

# Stronger but slower/costlier:
# triage_model = "gpt-4.1"
# reply_model  = "gpt-5.1-chat-latest"
#
# Or:
# triage_model = "gpt-5.2-chat-latest"
# reply_model  = "gpt-5.2-chat-latest"

# If provider="codex-oss", you can use local models via Ollama.
# Example:
# provider = "codex-oss"
# triage_model = "llama3.1"
# reply_model  = "llama3.1"

[[accounts]]
email = "lewis@colemanbros.co.uk"
label = "primary"
# Optional override if this mailbox is in a different tenant:
# tenant_id = "YOUR_TENANT_GUID"

# [[accounts]]
# email = "other@another-tenant.com"
# label = "other-org"
# tenant_id = "OTHER_TENANT_GUID"
