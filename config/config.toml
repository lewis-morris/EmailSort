
[auth]
# auth_mode:
# - "application": daemon / cron friendly (no browser login). Uses client credentials and Graph .default scope.
# - "delegated": interactive login on first use, then cached tokens (requires a browser).
auth_mode = "application"
# Token cache (shared by MSAL). Stored under ./data by default.
token_cache_path = "./data/msal_token_cache.bin"

[azure]
# Public/Confidential app ID (Entra ID App registration -> Application (client) ID)
client_id = '23472fe8-0700-48e1-a0e3-d351cc6bda0c'

# Default tenant. For single-tenant setups, set this to your tenant GUID.
# For multi-tenant delegated use, "organizations" can work, but for application auth you generally
# want the real tenant ID per org.
tenant_id = "92f217f9-7fcf-4d40-a990-f36c1737cfa8"

# For application auth, set client secret via env var (do NOT commit secrets).
# The tool reads the secret from this env var name:
# client_secret = 'Ct68Q~SbD3HM2WPH4u9q1oSQ7mU2AWuheTEcDdtV'

client_secret_env = "MS_GRAPH_CLIENT_SECRET"
# Application (client) ID of your Entra ID / Azure AD public client app

# Tenant to use:
# - "organizations" to allow any work/school account
# - "common" or "consumers" if you have a specific scenario
# - or your tenant GUID ("00000000-0000-0000-0000-000000000000")

# Authority URL. Usually you can leave this as-is.
# authority = "https://login.microsoftonline.com/92f217f9-7fcf-4d40-a990-f36c1737cfa8"

# Microsoft Graph scopes the app will request.1oSQ7mU2AWuheTEcDdtV"

# Delegated scopes (ONLY used if auth_mode="delegated")
# # IMPORTANT: do NOT include openid/profile/offline_access here; MSAL treats them as reserved and will error.
# delegated_scopes = [
#   'https://graph.microsoft.com/.default',
#   "Mail.ReadWrite",
#   "Mail.Send"
# ]

[triage]
lookback_days_initial = 60
lookback_days_incremental = 3
max_messages_per_run = 40

# Body handling (LLM prompt)
# plaintext | html
body_format = "plaintext"
# 0 = unlimited characters; otherwise truncate message body before sending to LLM
body_max_chars = 0
# Limit messages per thread when building context (0 = unlimited)
thread_max_messages = 0

# Tone profiling: Sent Items lookback for building tone profiles
tone_profile_lookback_days = 120

# Features
# Features
draft_replies = false
create_tasks = false
send_summary_email = false
log_to_file = true

# Optional summary email settings (requires Mail.Send)
summary_email_to = "lewis@colemanbros.co.uk"
# Which account should send summaries (must be in [[accounts]])
summary_email_from_account = "lewis@colemanbros.co.uk"

# Per-priority read/unread handling (true = mark read after processing; false = leave unread)
[triage.priority_read_state]
default = false
"Urgent" = false
"Priority 1" = false
"Priority 2" = false
"Priority 3" = false
"Marketing" = true
"Informational" = false
"Complete" = true
"Possibly Complete" = true
"Payment Request" = false
"Invoice" = false
"Order Confirmation" = false
"Issue" = false
"Task" = false

[llm]
# LLM provider for triage + tone profiling + drafting.
#
# provider:
# - "codex": use Codex CLI (recommended). No API key needed if Codex is authenticated already.
# - "codex-oss": use Codex CLI with --oss (routes to local provider, requires Ollama).
provider = "codex"

# Codex-only models (work with ChatGPT credits + codex exec)
# Balanced cost/speed: mini for triage, max for replies.
triage_model = "gpt-5.1-codex-mini"
reply_model  = "gpt-5.1-codex-max"

# Cheaper/faster (lowest cost, lowest quality):
# triage_model = "gpt-5.1-codex-mini"
# reply_model  = "gpt-5.1-codex-mini"

# More accurate (slower/costlier):
# triage_model = "gpt-5.1-codex-max"
# reply_model  = "gpt-5.1-codex-max"

# If provider="codex-oss", you can use local models via Ollama.
# Example:
# provider = "codex-oss"
# triage_model = "llama3.1"
# reply_model  = "llama3.1"

[[accounts]]
email = "lewis@colemanbros.co.uk"
label = "primary"
# Optional override if this mailbox is in a different tenant:
# tenant_id = "YOUR_TENANT_GUID"

# [[accounts]]
# email = "other@another-tenant.com"
# label = "other-org"
# tenant_id = "OTHER_TENANT_GUID"
